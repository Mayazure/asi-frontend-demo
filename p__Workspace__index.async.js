"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[365],{59349:function(K,R,n){n.r(R),n.d(R,{default:function(){return be}});var T=n(48305),g=n.n(T),k={workspaceContainer:"workspaceContainer___nOWQ2",menuBar:"menuBar___sJxXf",missionPane:"missionPane___wrFhh",sideBar:"sideBar___B3lKL"},c=n(75271),D=n(46516),x=n(86551),p=n(75643),P=n(94739),Z=n(37322),E=n(83475),B=n(90228),C=n.n(B),A=n(87999),F=n.n(A),we={"a6786fb3-4983-46a2-86c0-8274a257fc1d":{code:200,name:"\u6D4B\u5E8F\u4EFB\u52A12025",type:"type_a",status:1,date_created:1740697648,steps:[{name:"Step 1",status:1,file_log:"(UUID)",result_dir:"(UUID)"},{name:"Step 2",status:0,file_log:"(UUID)",result_dir:"(UUID)"},{name:"Another Step",status:3,file_log:"(UUID)",result_dir:"(UUID)"}]},"d22b4c20-a5bc-46a6-991d-abedd1c91e85":{code:200,name:"My Empty Mission",type:"type_b",status:0,date_created:1740697648,steps:[]},"741c4c38-039f-4ccc-b687-f77a13c3723a":{code:200,name:"\u8D85\u957F\u4EFB\u52A1\u540D\u6D4B\u8BD5-My Empty Mission - test a super long mission for UI. \u8FD8\u6CA1\u5B8C\u5C31\u662F\u8FD9\u4E48\u957F\u3002\u8D85\u7EA7\u957F\u7684\u4EFB\u52A1\u540D\u5594\u567B\u597D\u957F\u554A",type:"type_b",status:0,date_created:1740697648,steps:[]}},V=function(){var l=F()(C()().mark(function t(){return C()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(r){r({code:200,data:{missions:[{uid:"01956c11acae791894ff94d158c779c3",name:"\u6D4B\u8BD5\u7528\u9879\u76EE3",type:"transcriptome_eigenvector"},{uid:"01956c119fe27d1ea6ac245027c1cd7a",name:"\u6D4B\u8BD5\u7528\u9879\u76EE2",type:"transcriptome_eigenvector"},{uid:"01956c1192077de2a8af0927962ce621",name:"\u6D4B\u8BD5\u7528\u9879\u76EE1",type:"transcriptome_eigenvector"}]}})}));case 1:case"end":return a.stop()}},t)}));return function(){return l.apply(this,arguments)}}(),G={"01956c11acae791894ff94d158c779c3":{code:200,data:{name:"\u6D4B\u8BD5\u7528\u9879\u76EE3",type:"transcriptome_eigenvector",type_name:"\u8BA1\u7B97\u8F6C\u5F55\u7EC4\u7279\u5F81\u77E9\u9635",date_created:1741274852525249e-6,status:0,steps:[{name:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u9009\u62E9",type:"input",params:[{name:"genes",label:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u5BF9",type:"file_pair",multiple:!0}]},{name:"FastQC\u8FDB\u884C\u8D28\u63A7",type:"step"},{name:"Trimmomatic\u53BB\u63A5\u5934\u548C\u4F4E\u8D28\u91CF\u5E8F\u5217",type:"step"},{name:"HiSAT2\u5E8F\u5217\u6BD4\u5BF9",type:"step"},{name:"SamTools\uFF1ASam\u6587\u4EF6\u8F6C\u6362\u4E3ABam\u6587\u4EF6",type:"step"},{name:"\u5B9A\u91CF\u6C42\u7279\u5F81\u77E9\u9635",type:"output"}]}},"01956c119fe27d1ea6ac245027c1cd7a":{code:200,data:{name:"\u6D4B\u8BD5\u7528\u9879\u76EE2",type:"transcriptome_eigenvector",type_name:"\u8BA1\u7B97\u8F6C\u5F55\u7EC4\u7279\u5F81\u77E9\u9635",date_created:1741274849249515e-6,status:0,steps:[{name:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u9009\u62E9",type:"input",params:[{name:"genes",label:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u5BF9",type:"file_pair",multiple:!0}]},{name:"FastQC\u8FDB\u884C\u8D28\u63A7",type:"step"},{name:"Trimmomatic\u53BB\u63A5\u5934\u548C\u4F4E\u8D28\u91CF\u5E8F\u5217",type:"step"},{name:"HiSAT2\u5E8F\u5217\u6BD4\u5BF9",type:"step"},{name:"SamTools\uFF1ASam\u6587\u4EF6\u8F6C\u6362\u4E3ABam\u6587\u4EF6",type:"step"},{name:"\u5B9A\u91CF\u6C42\u7279\u5F81\u77E9\u9635",type:"output"}]}},"01956c1192077de2a8af0927962ce621":{code:200,data:{name:"\u6D4B\u8BD5\u7528\u9879\u76EE1",type:"transcriptome_eigenvector",type_name:"\u8BA1\u7B97\u8F6C\u5F55\u7EC4\u7279\u5F81\u77E9\u9635",date_created:1741274845701338e-6,status:0,steps:[{name:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u9009\u62E9",type:"input",params:[{name:"genes",label:"\u8F6C\u5F55\u7EC4\u57FA\u56E0\u5BF9",type:"file_pair",multiple:!0}]},{name:"FastQC\u8FDB\u884C\u8D28\u63A7",type:"step"},{name:"Trimmomatic\u53BB\u63A5\u5934\u548C\u4F4E\u8D28\u91CF\u5E8F\u5217",type:"step"},{name:"HiSAT2\u5E8F\u5217\u6BD4\u5BF9",type:"step"},{name:"SamTools\uFF1ASam\u6587\u4EF6\u8F6C\u6362\u4E3ABam\u6587\u4EF6",type:"step"},{name:"\u5B9A\u91CF\u6C42\u7279\u5F81\u77E9\u9635",type:"output"}]}}},X=function(){var l=F()(C()().mark(function t(s){return C()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(i){i(G[s])}));case 1:case"end":return r.stop()}},t)}));return function(s){return l.apply(this,arguments)}}(),Y=function(){var l=F()(C()().mark(function t(){return C()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(r){r({code:200,data:{category:[{url:"dataset",label:"Dataset",type:"list"},{url:"mission",label:"Mission",type:"tree"}]}})}));case 1:case"end":return a.stop()}},t)}));return function(){return l.apply(this,arguments)}}(),J=function(){var l=F()(C()().mark(function t(){return C()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(r){r({code:200,data:{records:[{uid:"019575bf-5000-7e94-ae3e-7c51bbfdda22",name:"gencode.vM25.annotation.gtf",type:0},{uid:"019575b4-226a-7d48-ba51-6132ba2307e6",name:"mm10",type:1},{uid:"01956cb1-9326-7c38-bedc-d61ea0c8c25a",name:"12_S12_R2_001.fastq.gz",type:0},{uid:"01956ca5-d26a-79a5-bf82-06fc6e28b15b",name:"12_S12_R1_001.fastq.gz",type:0},{uid:"01956ca5-a162-7a08-a556-bd616271f53a",name:"11_S11_R2_001.fastq.gz",type:0},{uid:"01956ca5-772a-71be-bbbe-d354207e0c53",name:"11_S11_R1_001.fastq.gz",type:0},{uid:"01956ca4-f5a5-7175-878e-db036b62d676",name:"10_S10_R2_001.fastq.gz",type:0},{uid:"01956ca3-6b91-7682-a763-16dfc7c02e23",name:"10_S10_R1_001.fastq.gz",type:0}]}})}));case 1:case"end":return a.stop()}},t)}));return function(){return l.apply(this,arguments)}}(),b=n(7863),q=n(27617),O=n(54375),ee=n(58456),te=n(15558),z=n.n(te),W=n(39157),ae=n(89893),L=n(89147),N=n(4615),H=n(32431),ne=n(84306),se=n(12707),e=n(52676),ie=N.Z.Search,re=function(t){var s=t.onItemClick,a=t.allowedRecordType,r=a===void 0?[0]:a,i=(0,c.useState)([]),o=g()(i,2),u=o[0],f=o[1],y=function(d){switch(d){case 0:return(0,e.jsx)(ne.Z,{});case 1:return(0,e.jsx)(se.Z,{});default:return(0,e.jsx)(e.Fragment,{})}};return(0,c.useEffect)(function(){J().then(function(v){f(v.data.records)})},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(ie,{placeholder:"input search text",allowClear:!0,style:{width:304}}),(0,e.jsx)(H.Z,{dataSource:u,renderItem:function(d){return(0,e.jsx)(H.Z.Item,{children:(0,e.jsx)(p.ZP,{type:"text",onClick:function(){return s==null?void 0:s(d)},icon:y(d.type),disabled:!r.includes(d.type),children:d.name})},d.uid)}})]})},oe=re,le=function(t){var s=t.border,a=s===void 0?!1:s,r=t.onItemClicked,i=c.useState([]),o=g()(i,2),u=o[0],f=o[1],y=c.useState(null),v=g()(y,2),d=v[0],m=v[1];(0,c.useEffect)(function(){Y().then(function(j){f(j.data.category)})},[]);var _=function(M){m(M)},I=u.map(function(j){return{key:j.url,label:(0,e.jsx)("div",{children:j.label})}});return(0,e.jsxs)("div",{style:{border:a?"1px solid rgb(240,240,240)":"",display:"flex",flexDirection:"row"},children:[(0,e.jsx)(L.Z,{style:{maxWidth:"200px",minHeight:"400px"},onClick:function(M){_(M.key)},mode:"inline",items:I}),(0,e.jsx)("div",{style:{padding:"16px"},children:d=="dataset"?(0,e.jsx)(oe,{onItemClick:r}):(0,e.jsx)(e.Fragment,{})})]})},de=le,Q=n(45659),ce=n(92448),ue=function(t){var s=t.param,a=s.multiple,r=a===void 0?!1:a,i=s.label,o=(0,c.useState)([]),u=g()(o,2),f=u[0],y=u[1],v=(0,c.useState)([]),d=g()(v,2),m=d[0],_=d[1],I=(0,c.useState)(!1),j=g()(I,2),M=j[0],w=j[1],_e=function(S){m.length==2?W.ZP.warning("Can only select two files.").then():m.length==1&&m[0].uid==S.uid?W.ZP.warning("Cannot select the same file twice.").then():_([].concat(z()(m),[S]))},ke=function(S){_(m.filter(function(U){return U.uid!==S.uid}))},Ie=function(){y([].concat(z()(f),[{uid:"".concat((0,ce.Z)()),filePair:m}])),_([]),w(!1)},Ze=function(S){y(f.filter(function(U){return U.uid!==S}))},Fe=function(){w(!1),_([])};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:"12px"},children:i}),f.map(function(h){return(0,e.jsxs)("div",{style:{background:"rgb(240,240,240)",margin:"12px 0",padding:"12px",display:"flex",alignItems:"center"},children:[(0,e.jsx)(p.ZP,{type:"text",icon:(0,e.jsx)(Q.Z,{}),style:{marginRight:"12px"},onClick:function(){Ze(h.uid)}}),(0,e.jsx)("div",{children:h.filePair.map(function(S){return(0,e.jsx)("div",{children:S.name})})})]})}),(f.length==0||r)&&(0,e.jsx)(p.ZP,{onClick:function(){w(!0)},icon:(0,e.jsx)(Z.Z,{}),size:"small",children:"Add File Pair"}),(0,e.jsx)("div",{style:{textAlign:"end"},children:(0,e.jsx)(p.ZP,{type:"primary",disabled:f.length==0,children:"Launch"})})]}),(0,e.jsxs)(P.Z,{onCancel:Fe,destroyOnClose:!0,title:"Select two files",open:M,okText:"Add",maskClosable:!1,footer:!1,children:[(0,e.jsx)(de,{border:!0,onItemClicked:_e}),m==null?void 0:m.map(function(h){return(0,e.jsx)("div",{children:(0,e.jsxs)(x.Z,{children:[h.name,(0,e.jsx)(p.ZP,{type:"text",icon:(0,e.jsx)(Q.Z,{}),onClick:function(){return ke(h)}})]})})}),(0,e.jsx)("div",{style:{marginTop:"12px",textAlign:"end"},children:(0,e.jsx)(ae.Z,{title:m.length!=2?"Please select two files":"",placement:"left",children:(0,e.jsx)(p.ZP,{type:"primary",disabled:m.length!=2,icon:(0,e.jsx)(Z.Z,{}),onClick:function(){return Ie()},children:"Add"})})})]})]})},me=ue,Re=function(t){var s=useIntl(),a={0:_jsx(Badge,{status:"processing",text:s.formatMessage({id:"workspace_mission_pane_step_processing",defaultMessage:"Processing"})}),1:_jsx(Badge,{status:"success",text:s.formatMessage({id:"workspace_mission_pane_step_success",defaultMessage:"Success"})}),2:_jsx(Badge,{status:"error",text:s.formatMessage({id:"workspace_mission_pane_step_error",defaultMessage:"Error"})}),3:_jsx(Badge,{status:"default",text:s.formatMessage({id:"workspace_mission_pane_step_waiting",defaultMessage:"Waiting"})})},r=t.status;return a[r]},pe=function(t){var s=t.step,a=s.name,r=s.files,i=r===void 0?[]:r;return(0,e.jsx)(O.Z,{hoverable:!0,title:a,children:i.map(function(o,u){return(0,e.jsx)(p.ZP,{type:"text",icon:(0,e.jsx)(ee.Z,{}),children:o})})})},fe=function(t){switch(t.type){case"file_pair":return(0,e.jsx)(me,{param:t});default:return(0,e.jsx)(e.Fragment,{})}},ve=function(t){var s=(0,b.useIntl)(),a=t.step,r=a.name,i=a.params;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.Z,{hoverable:!0,title:r,children:i==null?void 0:i.map(function(o){return fe(o)})})})},ge=function(t){switch(t.type){case"input":return(0,e.jsx)(ve,{step:t});case"step":case"output":return(0,e.jsx)(pe,{step:t});default:return(0,e.jsx)(e.Fragment,{})}},xe=function(t){var s=t.id,a=c.useState(null),r=g()(a,2),i=r[0],o=r[1],u=(0,b.useIntl)();(0,c.useEffect)(function(){X(s).then(function(y){return o(y.data)})},[s]);var f=[{key:"2",label:u.formatMessage({id:"workspace_mission_pane_description_created",defaultMessage:"Created"}),children:(0,q.j)(i==null?void 0:i.date_created)},{key:"3",label:u.formatMessage({id:"workspace_mission_pane_description_type",defaultMessage:"Type"}),children:i==null?void 0:i.type_name},{key:"4",label:u.formatMessage({id:"workspace_mission_pane_description_status",defaultMessage:"Status"}),children:i==null?void 0:i.status},{key:"1",label:u.formatMessage({id:"workspace_mission_pane_description_id",defaultMessage:"Mission ID"}),children:s}];return(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,e.jsx)(E.Z,{title:i==null?void 0:i.name,items:f,style:{borderBottom:"1px solid rgb(220,220,220)",padding:"8px"}}),(0,e.jsx)("div",{style:{padding:"60px",display:"flex",flexDirection:"column",flex:1,overflow:"auto"},children:i==null?void 0:i.steps.map(function(y,v){return(0,e.jsx)("div",{style:{marginBottom:"24px"},children:ge(y)},v)})})]})},ye=xe,$=n(91345),he=function(){var t=(0,b.useIntl)(),s=function(i){console.log("Success:",i)},a=function(i){console.log("Failed:",i)};return(0,e.jsxs)($.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},onFinish:s,onFinishFailed:a,autoComplete:"off",children:[(0,e.jsx)($.Z.Item,{label:t.formatMessage({id:"workspace_create_mission_modal_form_missionname_label",defaultMessage:"Mission Name"}),name:"missionName",rules:[{required:!0,message:t.formatMessage({id:"workspace_create_mission_modal_form_missionname_rule_required_msg",defaultMessage:"Please input your mission name."})}],children:(0,e.jsx)(N.Z,{})}),(0,e.jsx)($.Z.Item,{label:null,children:(0,e.jsx)(p.ZP,{type:"primary",htmlType:"submit",children:(0,e.jsx)(b.FormattedMessage,{id:"workspace_create_mission_modal_form_submit_btn_text",defaultMessage:"Create Mission"})})})]})},je=he,Ce=n(78637),Me=function(t){var s=t.missions,a=t.onMissionClick,r=t.currentMission;if(s==null||s.length===0)return(0,e.jsx)(Ce.Z,{styles:{image:{height:60}},description:"No missions."});var i=s.map(function(o){return{key:o.uid,label:(0,e.jsx)("div",{title:o.name,children:o.name})}});return(0,e.jsx)(L.Z,{onClick:function(u){a==null||a(u.key)},mode:"inline",items:i})},Se=Me,Pe=D.Z.Text;function be(){var l=(0,b.useIntl)(),t=c.useState(null),s=g()(t,2),a=s[0],r=s[1],i=c.useState(!1),o=g()(i,2),u=o[0],f=o[1],y=c.useState(null),v=g()(y,2),d=v[0],m=v[1];(0,c.useEffect)(function(){V().then(function(M){return m(M.data.missions)})},[]);var _=function(){f(!0)},I=function(){f(!1)},j=function(w){r(w)};return(0,e.jsxs)("div",{className:k.workspaceContainer,children:[(0,e.jsxs)("div",{className:k.menuBar,children:[(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(p.ZP,{size:"small",icon:(0,e.jsx)(Z.Z,{}),onClick:_,children:(0,e.jsx)(b.FormattedMessage,{id:"workspace_menu_create_mission_btn_text"})}),(0,e.jsx)(P.Z,{title:l.formatMessage({id:"workspace_create_mission_modal_title",defaultMessage:"Create a new mission"}),open:u,onClose:I,onCancel:I,maskClosable:!1,footer:!1,destroyOnClose:!0,children:(0,e.jsx)("div",{style:{borderTop:"solid 1px rgb(240,240,240)",paddingTop:"16px"},children:(0,e.jsx)(je,{})})})]}),(0,e.jsx)(x.Z,{})]}),(0,e.jsxs)("div",{className:k.missionPane,children:[(0,e.jsxs)("div",{className:k.sideBar,children:[(0,e.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",flex:1},children:(0,e.jsx)(Se,{missions:d,currentMission:a,onMissionClick:j})}),(0,e.jsx)("div",{style:{padding:"8px",borderTop:"1px solid rgb(220,220,220)"},children:(0,e.jsxs)(Pe,{children:[(0,e.jsx)(b.FormattedMessage,{id:"workspace_sidebar_total_mission"}),": ",d==null?void 0:d.length]})})]}),a==null?(0,e.jsx)("div",{style:{padding:"12px",color:"rgb(160, 160, 160)"},children:(0,e.jsx)(b.FormattedMessage,{id:"workspace_mission_pane_null_msg",defaultMessage:"Please select a Mission from list to view"})}):(0,e.jsx)(ye,{id:a})]})]})}},27617:function(K,R,n){n.d(R,{U:function(){return k},j:function(){return c}});var T=n(31759),g=n.n(T),k=function(x,p){if(x==null)return!1;if(Array.isArray(x))return x.includes(p);if(g()(x)==="object")return x.hasOwnProperty(p)},c=function(x){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(!x)return"-";var P=new Date(x*p),Z=String(P.getDate()).padStart(2,"0"),E=String(P.getMonth()+1).padStart(2,"0"),B=P.getFullYear(),C=String(P.getHours()).padStart(2,"0"),A=String(P.getMinutes()).padStart(2,"0"),F=String(P.getSeconds()).padStart(2,"0");return"".concat(B,"-").concat(E,"-").concat(Z," ").concat(C,":").concat(A)}}}]);
