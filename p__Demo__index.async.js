"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58],{29596:function(ce,Z,f){f.r(Z),f.d(Z,{default:function(){return re}});var O=f(26068),N=f.n(O),P=f(48305),A=f.n(P),S=f(41699),$=f(80846),D=f(35724),T=f(97033),G=f(16815),t=f(96773),U=function(e){var r=e.width,o=e.height,d=e.left,i=e.top,a=e.curve,x=e.zIndex,n=x===void 0?1:x,l=e.strokeWidth,g=e.strokeColor,m=e.fill,y=m===void 0?"transparent":m,j=a.mx,C=a.my,s=a.cx1,v=a.cy1,c=a.cx2,h=a.cy2,u=a.cx,p=a.cy;return(0,t.jsxs)("svg",{width:r+2*l,height:o+2*l,xmlns:"http://www.w3.org/2000/svg",pointerEvents:"none",style:{position:"fixed",transform:"translate(".concat(d-l,"px,").concat(i-l,"px)"),zIndex:n},children:[(0,t.jsx)("path",{id:"".concat(s).concat(v),d:"M ".concat(j+l," ").concat(C+l," C ").concat(s," ").concat(v,", ").concat(c," ").concat(h,", ").concat(u+l," ").concat(p+l),strokeWidth:l,stroke:g,fill:y,pointerEvents:"visibleStroke"}),(0,t.jsx)("circle",{r:"3",fill:"black",children:(0,t.jsx)("animateMotion",{repeatCount:"indefinite",dur:"3s",children:(0,t.jsx)("mpath",{href:"#".concat(s).concat(v)})})})]})},J=U,K=function(e){var r=e.r,o=e.strokeWidth,d=e.zIndex,i=d===void 0?999:d,a=e.left,x=e.top,n=e.strokeColor,l=n===void 0?"black":n,g=e.fill,m=g===void 0?"rgb(140,140,140)":g,y=r+o,j=y*2;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:j,height:j,style:{position:"fixed",zIndex:i,transform:"translate(".concat(a-y,"px,").concat(x-y,"px)")},children:(0,t.jsx)("circle",{r,fill:m,stroke:l,strokeWidth:o,cx:y,cy:y})})},R=K,L=function(e,r){var o=Math.abs(e.x-r.x),d=Math.abs(e.y-r.y),i=e.x<r.x?0:o,a=e.y<r.y?0:d,x=e.x<r.x?o:0,n=e.y<r.y?d:0,l=e.direction=="horizontal"?o/2:i,g=e.direction=="horizontal"?a:d/2,m=r.direction=="horizontal"?o/2:x,y=r.direction=="horizontal"?n:d/2;return{mx:i,my:a,cx1:l,cy1:g,cx2:m,cy2:y,cx:x,cy:n}},V=function(e){var r=e.startConnector,o=e.endConnector,d=e.edgeStroke,i=d===void 0?2:d,a=e.edgeColor,x=a===void 0?"black":a,n=e.connectorR,l=n===void 0?3:n,g=e.connectorStroke,m=g===void 0?1:g,y=e.connectorStrokeColor,j=y===void 0?"black":y,C=e.connectorFill,s=C===void 0?"rgb(140,140,140)":C,v=r.node.connector(r.position,r.fraction,r.connectorId),c=o.node.connector(o.position,o.fraction,o.connectorId);if(v==null||c==null)return(0,t.jsx)(t.Fragment,{});var h=Math.max(r.node.zIndex,o.node.zIndex)+1,u=h+1,p=u+1,w=Math.abs(v.x-c.x),W=Math.abs(v.y-c.y),ie=Math.min(v.x,c.x),de=Math.min(v.y,c.y),ae=L(v,c);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{width:w,height:W,left:ie,top:de,curve:ae,strokeWidth:i,strokeColor:x,zIndex:h}),(0,t.jsx)(R,{r:l,left:v.x,top:v.y,zIndex:u,strokeWidth:m,strokeColor:j,fill:s}),(0,t.jsx)(R,{r:l,left:c.x,top:c.y,zIndex:p,strokeWidth:m,strokeColor:j,fill:s})]})},F=V,X=f(25298),Y=f.n(X),H=f(17069),Q=f.n(H),q=f(82092),k=f.n(q),I=function(){function b(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Y()(this,b),k()(this,"key",void 0),k()(this,"left",void 0),k()(this,"top",void 0),k()(this,"right",void 0),k()(this,"bottom",void 0),k()(this,"dom",void 0),k()(this,"zIndex",void 0),k()(this,"init",void 0),k()(this,"connectors",void 0),this.key=e,this.left=r,this.top=o,this.zIndex=d,this.init=!1,this.connectors={}}return Q()(b,[{key:"move",value:function(r,o){this.left+=r,this.top+=o,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"isBound",value:function(){return this.bottom!=null&&this.right!=null}},{key:"bind",value:function(r){this.init=!0,this.dom=r,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"connector",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,d=arguments.length>2?arguments[2]:void 0,i=d?this.connectors[d]:this;if(i){var a=["left","right"].includes(r)?"horizontal":"vertical";switch(r){case"left":return{direction:a,x:i.left,y:i.top+(i.bottom-i.top)*o};case"right":return{direction:a,x:i.right,y:i.top+(i.bottom-i.top)*o};case"top":return{direction:a,x:i.left+(i.right-i.left)*o,y:i.top};case"bottom":return{direction:a,x:i.left+(i.right-i.left)*o,y:i.bottom}}}}},{key:"addConnector",value:function(r){var o=this.left+r.offsetLeft,d=this.top+r.offsetTop;this.connectors[r.id]={left:o,top:d,right:o+parseFloat(window.getComputedStyle(r).width),bottom:d+parseFloat(window.getComputedStyle(r).height)}}}]),b}(),_=function(e){var r=e.id,o=e.ref,d=e.node;return console.log("connectbox",o.current[d.key]),(0,t.jsx)("div",{id:r,ref:function(a){a&&(d==null||d.addConnector(a))},children:e.children})},E=_,ee=function(e){var r=e.children,o=e.node,d=e.onNodeSelected,i=e.ref,a=e.moving,x=a===void 0?!1:a,n=e.draggable,l=n===void 0?!0:n,g=e.title,m=g===void 0?!1:g,y=l?{zIndex:o.zIndex,position:"fixed",transform:"translate(".concat(o.left,"px,").concat(o.top,"px)"),cursor:l?x?"grabbing":"grab":""}:{},j=function v(c,h){return S.Children.map(c,function(u){var p,w;if(!S.isValidElement(u))return u;if(u.type==E)return h[u.props.id]=i,S.cloneElement(u,{ref:i,node:o});var W=(p=u.props)!==null&&p!==void 0&&p.children?v(u.props.children,h):(w=u.props)===null||w===void 0?void 0:w.children;return S.cloneElement(u,{},W)})},C={},s=j(r,C);return(0,t.jsxs)("div",N()(N()({id:o.key,ref:function(c){c&&(o.bind(c),i.current[o.key]=c)},style:N()({background:"rgba(255,255,255)",border:"solid 1px rgb(160,160,160)"},y)},l?{onMouseDown:function(){return d==null?void 0:d(o.key)},onTouchStart:function(){return d==null?void 0:d(o.key)}}:{}),{},{children:[m&&(0,t.jsx)("div",{style:{borderBottom:"solid 1px rgb(160,160,160)",padding:"8px"},children:m}),(0,t.jsx)("div",{style:{padding:"8px"},children:s})]}),o.key)},M=ee,te=f(15558),z=f.n(te),oe=function(e){var r=e.nodes,o=r===void 0?[]:r,d=e.onNodeSelected,i=e.title,a=i===void 0?"":i,x=o.filter(function(s){return!Array.isArray(s)}),n=o.filter(function(s){return Array.isArray(s)}),l=function s(v){var c=[];return v.forEach(function(h){Array.isArray(h)?c=[].concat(z()(c),z()(s(h))):c.push(h.key)}),c},g={top:60,left:20,right:20,bottom:20},m=Math.min.apply(Math,z()(x.map(function(s){return s.top})))-g.top,y=Math.max.apply(Math,z()(x.map(function(s){return s.bottom})))+g.bottom,j=Math.min.apply(Math,z()(x.map(function(s){return s.left})))-g.left,C=Math.max.apply(Math,z()(x.map(function(s){return s.right})))+g.right;return(0,t.jsx)("div",{style:{zIndex:-1,border:"solid 1px rgb(0,0,0)",width:"".concat(C-j,"px"),height:"".concat(y-m,"px"),position:"fixed",transform:"translate(".concat(j,"px, ").concat(m,"px)"),cursor:"move",padding:"8px",margin:"8px"},onMouseDown:function(){return d==null?void 0:d(l(o))},children:a})},B=oe,ne=function(){var e=(0,S.useState)([]),r=A()(e,2),o=r[0],d=r[1],i=(0,S.useRef)({}),a=(0,S.useState)({node0:new I("node0",40,40,20),node1:new I("node1",280,360,30),node2:new I("node2",550,280,40),node3:new I("node3",740,340,40),node4:new I("node4",1120,120,40),node5:new I("node5",1400,180,40)}),x=A()(a,2),n=x[0],l=x[1],g=(0,S.useState)(0),m=A()(g,2),y=m[0],j=m[1];(0,S.useEffect)(function(){var c=0;return Object.entries(i.current).forEach(function(h){var u=A()(h,2),p=u[0],w=u[1];n[p].isBound()?c=1:c=0}),j(c),function(){j(0)}},[]);var C=function(h){Array.isArray(h)?d(h):d([h])},s=function(){o.length>0&&d([])},v=function(h){if(o.length>0){var u=Object.fromEntries(o.map(function(p){var w=n[p];return w.move(h.movementX,h.movementY),[p,w]}));l(N()(N()({},n),u))}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{margin:"8px"},children:"Drag component to move."}),(0,t.jsxs)("div",{style:{background:"rgb(240,240,240)",height:"600px",width:"100%",overflow:"auto",contain:"paint"},onMouseMove:v,onMouseUp:s,onTouchEnd:s,children:[(0,t.jsx)(M,{node:n.node0,onNodeSelected:C,ref:i,moving:o.includes(n.node0.key),children:(0,t.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Input"})}),(0,t.jsx)(M,{node:n.node1,onNodeSelected:C,ref:i,moving:o.includes(n.node1.key),title:"Step 1",children:(0,t.jsxs)($.Z,{direction:"vertical",children:[(0,t.jsx)(D.Z,{placeholder:"Data"}),(0,t.jsx)(T.Z,{})]})}),(0,t.jsx)(M,{node:n.node2,onNodeSelected:C,ref:i,moving:o.includes(n.node2.key),title:"Step 2"}),(0,t.jsx)(M,{node:n.node3,onNodeSelected:C,ref:i,moving:o.includes(n.node3.key),title:"Step 3",children:(0,t.jsx)("div",{children:(0,t.jsxs)($.Z,{children:[(0,t.jsx)(E,{id:"step3-input",children:(0,t.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"8px 24px"},children:"Input"})}),(0,t.jsxs)($.Z,{direction:"vertical",children:[(0,t.jsx)(D.Z,{placeholder:"Data"}),(0,t.jsx)(G.Z,{id:"step3-date",style:{width:"100%"}})]}),(0,t.jsx)(E,{id:"step3-output",children:(0,t.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"8px 24px"},children:"Output"})})]})})}),(0,t.jsx)(M,{node:n.node4,onNodeSelected:C,ref:i,moving:o.includes(n.node4.key),title:"Step 4",children:(0,t.jsx)(D.Z,{placeholder:"Data"})}),(0,t.jsx)(M,{node:n.node5,onNodeSelected:C,ref:i,moving:o.includes(n.node5.key),children:(0,t.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Output"})}),(0,t.jsx)(B,{title:"Big Process",nodes:[n.node1,n.node2,n.node3,n.node4],onNodeSelected:C}),(0,t.jsx)(B,{title:"Sub Process",nodes:[n.node2,n.node3],onNodeSelected:C}),y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node1,position:"left"}}),(0,t.jsx)(F,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node2,position:"left"}}),(0,t.jsx)(F,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node3,position:"left",connectorId:"step3-input"}}),(0,t.jsx)(F,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node4,position:"left"}}),(0,t.jsx)(F,{startConnector:{node:n.node3,position:"right",fraction:.5,connectorId:"step3-output"},endConnector:{node:n.node5,position:"left",fraction:.5}})]})]}),(0,t.jsxs)("div",{children:["Moving: ",JSON.stringify(o)]}),(0,t.jsxs)("div",{children:[Object.entries(n).map(function(c){var h=A()(c,2),u=h[0],p=h[1];return(0,t.jsxs)("div",{children:[u,": ",JSON.stringify({key:p.key,left:p.left,top:p.top,right:p.right,bottom:p.bottom,zIndex:p.zIndex})]},u)}),(0,t.jsx)("hr",{})]})]})},re=ne}}]);
