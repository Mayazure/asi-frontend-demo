"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58],{29596:function(ce,Z,f){f.r(Z),f.d(Z,{default:function(){return re}});var O=f(26068),A=f.n(O),P=f(48305),F=f.n(P),k=f(41699),D=f(80846),E=f(35724),G=f(97033),T=f(16815),t=f(96773),U=function(e){var r=e.width,o=e.height,d=e.left,i=e.top,a=e.curve,x=e.zIndex,n=x===void 0?1:x,h=e.strokeWidth,g=e.strokeColor,p=e.fill,m=p===void 0?"transparent":p,j=a.mx,y=a.my,s=a.cx1,u=a.cy1,l=a.cx2,v=a.cy2,c=a.cx,b=a.cy;return(0,t.jsxs)("svg",{width:r+2*h,height:o+2*h,xmlns:"http://www.w3.org/2000/svg",pointerEvents:"none",style:{position:"fixed",transform:"translate(".concat(d-h,"px,").concat(i-h,"px)"),zIndex:n},children:[(0,t.jsx)("path",{id:"".concat(s).concat(u),d:"M ".concat(j+h," ").concat(y+h," C ").concat(s," ").concat(u,", ").concat(l," ").concat(v,", ").concat(c+h," ").concat(b+h),strokeWidth:h,stroke:g,fill:m,pointerEvents:"visibleStroke"}),(0,t.jsx)("circle",{r:"3",fill:"black",children:(0,t.jsx)("animateMotion",{repeatCount:"indefinite",dur:"3s",children:(0,t.jsx)("mpath",{href:"#".concat(s).concat(u)})})})]})},J=U,K=function(e){var r=e.r,o=e.strokeWidth,d=e.zIndex,i=d===void 0?999:d,a=e.left,x=e.top,n=e.strokeColor,h=n===void 0?"black":n,g=e.fill,p=g===void 0?"rgb(140,140,140)":g,m=r+o,j=m*2;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:j,height:j,style:{position:"fixed",zIndex:i,transform:"translate(".concat(a-m,"px,").concat(x-m,"px)")},children:(0,t.jsx)("circle",{r,fill:p,stroke:h,strokeWidth:o,cx:m,cy:m})})},R=K,L=function(e,r){var o=Math.abs(e.x-r.x),d=Math.abs(e.y-r.y),i=e.x<r.x?0:o,a=e.y<r.y?0:d,x=e.x<r.x?o:0,n=e.y<r.y?d:0,h=e.direction=="horizontal"?o/2:i,g=e.direction=="horizontal"?a:d/2,p=r.direction=="horizontal"?o/2:x,m=r.direction=="horizontal"?n:d/2;return{mx:i,my:a,cx1:h,cy1:g,cx2:p,cy2:m,cx:x,cy:n}},V=function(e){var r=e.startConnector,o=e.endConnector,d=e.edgeStroke,i=d===void 0?2:d,a=e.edgeColor,x=a===void 0?"black":a,n=e.connectorR,h=n===void 0?3:n,g=e.connectorStroke,p=g===void 0?1:g,m=e.connectorStrokeColor,j=m===void 0?"black":m,y=e.connectorFill,s=y===void 0?"rgb(140,140,140)":y,u=r.node.connector(r.position,r.fraction,r.connectorId),l=o.node.connector(o.position,o.fraction,o.connectorId);if(u==null||l==null)return(0,t.jsx)(t.Fragment,{});var v=Math.max(r.node.zIndex,o.node.zIndex)+1,c=v+1,b=c+1,C=Math.abs(u.x-l.x),I=Math.abs(u.y-l.y),ie=Math.min(u.x,l.x),de=Math.min(u.y,l.y),ae=L(u,l);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{width:C,height:I,left:ie,top:de,curve:ae,strokeWidth:i,strokeColor:x,zIndex:v}),(0,t.jsx)(R,{r:h,left:u.x,top:u.y,zIndex:c,strokeWidth:p,strokeColor:j,fill:s}),(0,t.jsx)(R,{r:h,left:l.x,top:l.y,zIndex:b,strokeWidth:p,strokeColor:j,fill:s})]})},$=V,X=f(25298),Y=f.n(X),H=f(17069),Q=f.n(H),q=f(82092),w=f.n(q),M=function(){function S(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Y()(this,S),w()(this,"key",void 0),w()(this,"left",void 0),w()(this,"top",void 0),w()(this,"right",void 0),w()(this,"bottom",void 0),w()(this,"dom",void 0),w()(this,"zIndex",void 0),w()(this,"init",void 0),w()(this,"connectors",void 0),this.key=e,this.left=r,this.top=o,this.zIndex=d,this.init=!1,this.connectors={}}return Q()(S,[{key:"move",value:function(r,o){this.left+=r,this.top+=o,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"isBound",value:function(){return this.bottom!=null&&this.right!=null}},{key:"bind",value:function(r){this.init=!0,this.dom=r,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"connector",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,d=arguments.length>2?arguments[2]:void 0,i=d?this.connectors[d]:this;if(i){var a=["left","right"].includes(r)?"horizontal":"vertical";switch(r){case"left":return{direction:a,x:i.left,y:i.top+(i.bottom-i.top)*o};case"right":return{direction:a,x:i.right,y:i.top+(i.bottom-i.top)*o};case"top":return{direction:a,x:i.left+(i.right-i.left)*o,y:i.top};case"bottom":return{direction:a,x:i.left+(i.right-i.left)*o,y:i.bottom}}}}},{key:"addConnector",value:function(r){var o=this.left+r.offsetLeft,d=this.top+r.offsetTop;this.connectors[r.id]={left:o,top:d,right:o+parseFloat(window.getComputedStyle(r).width),bottom:d+parseFloat(window.getComputedStyle(r).height)}}}]),S}(),_=function(e){var r=e.id,o=e.ref,d=e.node;return console.log("connectbox",o.current[d.key]),(0,t.jsx)("div",{id:r,ref:function(a){a&&(d==null||d.addConnector(a))},children:e.children})},W=_,ee=function(e){var r=e.children,o=e.node,d=e.onNodeSelected,i=e.ref,a=e.moving,x=a===void 0?!1:a,n=e.draggable,h=n===void 0?!0:n,g=e.title,p=g===void 0?!1:g,m=h?{zIndex:o.zIndex,position:"fixed",transform:"translate(".concat(o.left,"px,").concat(o.top,"px)"),cursor:h?x?"grabbing":"grab":""}:{},j=function u(l,v){return k.Children.map(l,function(c){var b,C;if(!k.isValidElement(c))return c;if(c.type==W)return v[c.props.id]=i,k.cloneElement(c,{ref:i,node:o});var I=(b=c.props)!==null&&b!==void 0&&b.children?u(c.props.children,v):(C=c.props)===null||C===void 0?void 0:C.children;return k.cloneElement(c,{},I)})},y={},s=j(r,y);return(0,t.jsxs)("div",A()(A()({id:o.key,ref:function(l){l&&(o.bind(l),i.current[o.key]=l)},style:A()({background:"rgba(255,255,255)",border:"solid 1px rgb(160,160,160)"},m)},h?{onMouseDown:function(l){d==null||d(o.key),l.stopPropagation()}}:{}),{},{children:[p&&(0,t.jsx)("div",{style:{borderBottom:"solid 1px rgb(160,160,160)",padding:"8px"},children:p}),(0,t.jsx)("div",{style:{padding:"8px"},children:s})]}),o.key)},z=ee,te=f(15558),N=f.n(te),oe=function(e){var r=e.nodes,o=r===void 0?[]:r,d=e.onNodeSelected,i=e.title,a=i===void 0?"":i,x=o.filter(function(s){return!Array.isArray(s)}),n=o.filter(function(s){return Array.isArray(s)}),h=function s(u){var l=[];return u.forEach(function(v){Array.isArray(v)?l=[].concat(N()(l),N()(s(v))):l.push(v.key)}),l},g={top:60,left:20,right:20,bottom:20},p=Math.min.apply(Math,N()(x.map(function(s){return s.top})))-g.top,m=Math.max.apply(Math,N()(x.map(function(s){return s.bottom})))+g.bottom,j=Math.min.apply(Math,N()(x.map(function(s){return s.left})))-g.left,y=Math.max.apply(Math,N()(x.map(function(s){return s.right})))+g.right;return(0,t.jsx)("div",{style:{zIndex:-1,border:"solid 1px rgb(0,0,0)",width:"".concat(y-j,"px"),height:"".concat(m-p,"px"),position:"fixed",transform:"translate(".concat(j,"px, ").concat(p,"px)"),cursor:"move",padding:"8px",margin:"8px"},onMouseDown:function(u){d==null||d(h(o)),u.stopPropagation()},children:a})},B=oe,ne=function(){var e=(0,k.useState)([]),r=F()(e,2),o=r[0],d=r[1],i=(0,k.useRef)({}),a=(0,k.useState)({node0:new M("node0",40,40,20),node1:new M("node1",280,360,30),node2:new M("node2",550,280,40),node3:new M("node3",740,340,40),node4:new M("node4",1120,120,40),node5:new M("node5",1400,180,40)}),x=F()(a,2),n=x[0],h=x[1],g=(0,k.useState)(0),p=F()(g,2),m=p[0],j=p[1];(0,k.useEffect)(function(){var v=0;return Object.entries(i.current).forEach(function(c){var b=F()(c,2),C=b[0],I=b[1];n[C].isBound()?v=1:v=0}),j(v),function(){j(0)}},[]);var y=function(c){Array.isArray(c)?d(c):d([c])},s=function(){y(Object.keys(n))},u=function(){o.length>0&&d([])},l=function(c){if(o.length>0){var b=Object.fromEntries(o.map(function(C){var I=n[C];return I.move(c.movementX,c.movementY),[C,I]}));h(A()(A()({},n),b))}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{margin:"8px"},children:"Drag component to move."}),(0,t.jsxs)("div",{style:{background:"rgb(240,240,240)",height:"600px",width:"100%",overflow:"auto",contain:"paint"},onMouseDown:s,onMouseMove:l,onMouseUp:u,onTouchEnd:u,children:[(0,t.jsx)(z,{node:n.node0,onNodeSelected:y,ref:i,moving:o.includes(n.node0.key),children:(0,t.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Input"})}),(0,t.jsx)(z,{node:n.node1,onNodeSelected:y,ref:i,moving:o.includes(n.node1.key),title:"Step 1",children:(0,t.jsxs)(D.Z,{direction:"vertical",children:[(0,t.jsx)(E.Z,{placeholder:"Data"}),(0,t.jsx)(G.Z,{})]})}),(0,t.jsx)(z,{node:n.node2,onNodeSelected:y,ref:i,moving:o.includes(n.node2.key),title:"Step 2"}),(0,t.jsx)(z,{node:n.node3,onNodeSelected:y,ref:i,moving:o.includes(n.node3.key),title:"Step 3",children:(0,t.jsx)("div",{children:(0,t.jsxs)(D.Z,{children:[(0,t.jsx)(W,{id:"step3-input",children:(0,t.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"8px 24px"},children:"Input"})}),(0,t.jsxs)(D.Z,{direction:"vertical",children:[(0,t.jsx)(E.Z,{placeholder:"Data"}),(0,t.jsx)(T.Z,{id:"step3-date",style:{width:"100%"}})]}),(0,t.jsx)(W,{id:"step3-output",children:(0,t.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"8px 24px"},children:"Output"})})]})})}),(0,t.jsx)(z,{node:n.node4,onNodeSelected:y,ref:i,moving:o.includes(n.node4.key),title:"Step 4",children:(0,t.jsx)(E.Z,{placeholder:"Data"})}),(0,t.jsx)(z,{node:n.node5,onNodeSelected:y,ref:i,moving:o.includes(n.node5.key),children:(0,t.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Output"})}),(0,t.jsx)(B,{title:"Big Process",nodes:[n.node1,n.node2,n.node3,n.node4],onNodeSelected:y}),(0,t.jsx)(B,{title:"Sub Process",nodes:[n.node2,n.node3],onNodeSelected:y}),m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node1,position:"left"}}),(0,t.jsx)($,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node2,position:"left"}}),(0,t.jsx)($,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node3,position:"left",connectorId:"step3-input"}}),(0,t.jsx)($,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node4,position:"left"}}),(0,t.jsx)($,{startConnector:{node:n.node3,position:"right",fraction:.5,connectorId:"step3-output"},endConnector:{node:n.node5,position:"left",fraction:.5}})]})]}),(0,t.jsxs)("div",{children:["Moving: ",JSON.stringify(o)]}),(0,t.jsxs)("div",{children:[Object.entries(n).map(function(v){var c=F()(v,2),b=c[0],C=c[1];return(0,t.jsxs)("div",{children:[b,": ",JSON.stringify({key:C.key,left:C.left,top:C.top,right:C.right,bottom:C.bottom,zIndex:C.zIndex})]},b)}),(0,t.jsx)("hr",{})]})]})},re=ne}}]);
