"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58],{29596:function(ve,G,u){u.r(G),u.d(G,{default:function(){return ue}});var Y=u(26068),R=u.n(Y),K=u(48305),z=u.n(K),C=u(41699),J=u(80846),E=u(35724),V=u(97033),H=u(16815),o=u(96773),Q=function(t){var r=t.width,e=t.height,d=t.left,i=t.top,s=t.curve,f=t.zIndex,h=f===void 0?1:f,c=t.strokeWidth,p=t.strokeColor,x=t.fill,g=x===void 0?"transparent":x,a=s.mx,v=s.my,l=s.cx1,n=s.cy1,m=s.cx2,k=s.cy2,M=s.cx,A=s.cy;return(0,o.jsxs)("svg",{width:r+2*c,height:e+2*c,xmlns:"http://www.w3.org/2000/svg",pointerEvents:"none",style:{position:"fixed",transform:"translate(".concat(d-c,"px,").concat(i-c,"px)"),zIndex:h},children:[(0,o.jsx)("path",{id:"".concat(l).concat(n),d:"M ".concat(a+c," ").concat(v+c," C ").concat(l," ").concat(n,", ").concat(m," ").concat(k,", ").concat(M+c," ").concat(A+c),strokeWidth:c,stroke:p,fill:g,pointerEvents:"visibleStroke"}),(0,o.jsx)("circle",{r:"3",fill:"black",children:(0,o.jsx)("animateMotion",{repeatCount:"indefinite",dur:"3s",children:(0,o.jsx)("mpath",{href:"#".concat(l).concat(n)})})})]})},q=Q,_=function(t){var r=t.r,e=t.strokeWidth,d=t.zIndex,i=d===void 0?999:d,s=t.left,f=t.top,h=t.strokeColor,c=h===void 0?"black":h,p=t.fill,x=p===void 0?"rgb(140,140,140)":p,g=r+e,a=g*2;return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,style:{position:"fixed",zIndex:i,transform:"translate(".concat(s-g,"px,").concat(f-g,"px)")},children:(0,o.jsx)("circle",{r,fill:x,stroke:c,strokeWidth:e,cx:g,cy:g})})},U=_,ee=function(t,r){var e=Math.abs(t.x-r.x),d=Math.abs(t.y-r.y),i=t.x<r.x?0:e,s=t.y<r.y?0:d,f=t.x<r.x?e:0,h=t.y<r.y?d:0,c=t.direction=="horizontal"?e/2:i,p=t.direction=="horizontal"?s:d/2,x=r.direction=="horizontal"?e/2:f,g=r.direction=="horizontal"?h:d/2;return{mx:i,my:s,cx1:c,cy1:p,cx2:x,cy2:g,cx:f,cy:h}},te=function(t){var r=t.startConnector,e=t.endConnector,d=t.edgeStroke,i=d===void 0?2:d,s=t.edgeColor,f=s===void 0?"black":s,h=t.connectorR,c=h===void 0?3:h,p=t.connectorStroke,x=p===void 0?1:p,g=t.connectorStrokeColor,a=g===void 0?"black":g,v=t.connectorFill,l=v===void 0?"rgb(140,140,140)":v,n=r.node.connector(r.position,r.fraction,r.connectorId),m=e.node.connector(e.position,e.fraction,e.connectorId);if(n==null||m==null)return(0,o.jsx)(o.Fragment,{});var k=r.node.zIndex+1,M=e.node.zIndex+1,A=Math.min(k,M)-1,W=Math.abs(n.x-m.x),S=Math.abs(n.y-m.y),O=Math.min(n.x,m.x),P=Math.min(n.y,m.y),T=ee(n,m);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(q,{width:W,height:S,left:O,top:P,curve:T,strokeWidth:i,strokeColor:f,zIndex:A}),(0,o.jsx)(U,{r:c,left:n.x,top:n.y,zIndex:k,strokeWidth:x,strokeColor:a,fill:l}),(0,o.jsx)(U,{r:c,left:m.x,top:m.y,zIndex:M,strokeWidth:x,strokeColor:a,fill:l})]})},$=te,oe=u(25298),ne=u.n(oe),re=u(17069),ie=u.n(re),de=u(82092),I=u.n(de),N=function(){function j(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;ne()(this,j),I()(this,"key",void 0),I()(this,"left",void 0),I()(this,"top",void 0),I()(this,"right",void 0),I()(this,"bottom",void 0),I()(this,"dom",void 0),I()(this,"zIndex",void 0),I()(this,"connectors",void 0),this.key=t,this.left=r,this.top=e,this.zIndex=d,this.connectors={}}return ie()(j,[{key:"move",value:function(r,e){if(!this.dom){console.warn("[".concat(this.key,"] moving with no dom."));return}this.left+=r,this.top+=e,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"isBound",value:function(){return this.bottom!=null&&this.right!=null}},{key:"bind",value:function(r){this.dom=r,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"connector",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,d=arguments.length>2?arguments[2]:void 0,i=d?this.connectors[d]:this;if(!i)return null;var s=["left","right"].includes(r)?"horizontal":"vertical";switch(r){case"left":return{direction:s,x:i.left,y:i.top+(i.bottom-i.top)*e};case"right":return{direction:s,x:i.right,y:i.top+(i.bottom-i.top)*e};case"top":return{direction:s,x:i.left+(i.right-i.left)*e,y:i.top};case"bottom":return{direction:s,x:i.left+(i.right-i.left)*e,y:i.bottom};default:return null}}},{key:"addConnector",value:function(r){var e=window.getComputedStyle(r),d=this.left+r.offsetLeft+parseFloat(e.marginLeft),i=this.top+r.offsetTop+parseFloat(e.marginTop);this.connectors[r.id]={left:d,top:i,right:d+parseFloat(e.width)-parseFloat(e.marginRight),bottom:i+parseFloat(e.height)-parseFloat(e.marginBottom)}}}]),j}(),ae=function(t){var r=t.id,e=t.node,d=t.children,i=function(f){f&&(e==null||e.addConnector(f))};return(0,o.jsx)("div",{id:r,ref:i,children:t.children})},B=ae,se=function(t){var r=t.children,e=t.node,d=t.onNodeSelected,i=t.ref,s=t.moving,f=s===void 0?!1:s,h=t.title,c=h===void 0?!1:h,p={zIndex:e.zIndex,position:"fixed",transform:"translate(".concat(e.left,"px,").concat(e.top,"px)"),cursor:f?"grabbing":"grab"},x=function a(v){return C.Children.map(v,function(l){var n,m;if(!C.isValidElement(l))return l;var k=(n=l.props)!==null&&n!==void 0&&n.children?a(l.props.children):(m=l.props)===null||m===void 0?void 0:m.children;return l.type==B?C.cloneElement(l,{node:e},k):C.cloneElement(l,{},k)})},g=x(r);return(0,o.jsxs)("div",{id:e.key,ref:function(v){v&&(e.bind(v),i.current[e.key]=v)},style:R()({background:"rgba(255,255,255)",border:"solid 1px rgb(160,160,160)"},p),onMouseDown:function(v){d==null||d(e.key),v.stopPropagation()},onTouchStart:function(v){d==null||d(e.key),v.stopPropagation()},children:[c&&(0,o.jsx)("div",{style:{borderBottom:"solid 1px rgb(160,160,160)",padding:"8px"},children:c}),(0,o.jsx)("div",{style:{padding:"8px"},children:g})]},e.key)},F=se,ce=u(15558),D=u.n(ce),le=function(t){var r=t.nodes,e=r===void 0?[]:r,d=t.onNodeSelected,i=t.title,s=i===void 0?"":i,f=function a(v){var l=[];return v.forEach(function(n){Array.isArray(n)?l=[].concat(D()(l),D()(a(n))):l.push(n.key)}),l},h={top:60,left:20,right:20,bottom:20},c=Math.min.apply(Math,D()(e.map(function(a){return a.left})))-h.left,p=Math.min.apply(Math,D()(e.map(function(a){return a.top})))-h.top,x=Math.max.apply(Math,D()(e.map(function(a){return a.right||a.left})))+h.right,g=Math.max.apply(Math,D()(e.map(function(a){return a.bottom||a.top})))+h.bottom;return(0,o.jsx)("div",{style:{zIndex:-1,border:"solid 1px rgb(0,0,0)",width:"".concat(x-c,"px"),height:"".concat(g-p,"px"),position:"fixed",transform:"translate(".concat(c,"px, ").concat(p,"px)"),cursor:"move",padding:"8px",margin:"8px"},onMouseDown:function(v){d==null||d(f(e)),v.stopPropagation()},children:s})},L=le,he=function(){var t=(0,C.useState)([]),r=z()(t,2),e=r[0],d=r[1],i=(0,C.useState)(!1),s=z()(i,2),f=s[0],h=s[1],c=(0,C.useState)({x:0,y:0}),p=z()(c,2),x=p[0],g=p[1],a=(0,C.useRef)({}),v=(0,C.useState)({node0:new N("node0",40,40,20),node1:new N("node1",280,360,30),node2:new N("node2",550,280,40),node3:new N("node3",740,340,40),node4:new N("node4",1120,120,40),node5:new N("node5",1400,180,40)}),l=z()(v,2),n=l[0],m=l[1],k=(0,C.useState)(0),M=z()(k,2),A=M[0],W=M[1];(0,C.useEffect)(function(){var b=0;return Object.keys(a.current).forEach(function(y){n[y].isBound()?b=1:b=0}),W(b),function(){W(0)}},[]);var S=function(y){Array.isArray(y)?d(y):d([y])},O=function(){S(Object.keys(n)),h(!0)},P=function(){e.length>0&&d([]),h(!1)},T=function(y){if(e.length>0){var Z=Object.fromEntries(e.map(function(w){var X=n[w];return X.move(y.movementX,y.movementY),[w,X]}));m(R()(R()({},n),Z)),f&&g({x:x.x+y.movementX,y:x.y+y.movementY})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{margin:"8px"},children:"Drag component to move."}),(0,o.jsxs)("div",{style:{background:"rgb(250,250,250)",height:"600px",width:"100%",overflow:"hidden",contain:"paint",backgroundImage:"radial-gradient(circle, rgb(180,180,180) 10%, transparent 10%)",backgroundSize:"12px 12px",backgroundPosition:"".concat(x.x,"px ").concat(x.y,"px")},draggable:!1,onMouseDown:O,onMouseMove:T,onMouseUp:P,onTouchEnd:P,children:[(0,o.jsx)(F,{node:n.node0,onNodeSelected:S,ref:a,moving:e.includes(n.node0.key),children:(0,o.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Input"})}),(0,o.jsx)(F,{node:n.node1,onNodeSelected:S,ref:a,moving:e.includes(n.node1.key),title:"Step 1",children:(0,o.jsxs)(J.Z,{direction:"vertical",children:[(0,o.jsx)(E.Z,{placeholder:"Data"}),(0,o.jsx)(V.Z,{})]})}),(0,o.jsx)(F,{node:n.node2,onNodeSelected:S,ref:a,moving:e.includes(n.node2.key),title:"Step 2"}),(0,o.jsx)(F,{node:n.node3,onNodeSelected:S,ref:a,moving:e.includes(n.node3.key),title:"Step 3",children:(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"start",flexDirection:"row"},children:[(0,o.jsx)(B,{id:"step3-input",children:(0,o.jsx)(E.Z,{placeholder:"Input data"})}),(0,o.jsxs)(J.Z,{direction:"vertical",style:{margin:"0px 8px"},children:[(0,o.jsx)(E.Z,{placeholder:"Data"}),(0,o.jsx)(H.Z,{id:"step3-date",style:{width:"100%"}})]}),(0,o.jsx)(B,{id:"step3-output",children:(0,o.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"8px 24px"},children:"Output"})})]})})}),(0,o.jsx)(F,{node:n.node4,onNodeSelected:S,ref:a,moving:e.includes(n.node4.key),title:"Step 4",children:(0,o.jsx)(E.Z,{placeholder:"Data"})}),(0,o.jsx)(F,{node:n.node5,onNodeSelected:S,ref:a,moving:e.includes(n.node5.key),children:(0,o.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Output"})}),(0,o.jsx)(L,{title:"Big Process",nodes:[n.node1,n.node2,n.node3,n.node4],onNodeSelected:S}),(0,o.jsx)(L,{title:"Sub Process",nodes:[n.node2,n.node3],onNodeSelected:S}),A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node1,position:"left"}}),(0,o.jsx)($,{startConnector:{node:n.node0,position:"right"},endConnector:{node:n.node2,position:"left"}}),(0,o.jsx)($,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node3,position:"left",connectorId:"step3-input"}}),(0,o.jsx)($,{startConnector:{node:n.node2,position:"right"},endConnector:{node:n.node4,position:"left"}}),(0,o.jsx)($,{startConnector:{node:n.node3,position:"right",fraction:.5,connectorId:"step3-output"},endConnector:{node:n.node5,position:"left",fraction:.5}})]})]}),(0,o.jsxs)("div",{children:["Moving: ",JSON.stringify(e)]}),(0,o.jsxs)("div",{children:[Object.entries(n).map(function(b){var y=z()(b,2),Z=y[0],w=y[1];return(0,o.jsxs)("div",{children:[Z,": ",JSON.stringify({key:w.key,left:w.left,top:w.top,right:w.right,bottom:w.bottom,zIndex:w.zIndex})]},Z)}),(0,o.jsx)("hr",{}),JSON.stringify(n.node3.connectors)]})]})},ue=he}}]);
