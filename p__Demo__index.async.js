"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58],{83742:function(de,D,h){h.r(D),h.d(D,{default:function(){return oe}});var Z=h(26068),$=h.n(Z),O=h(48305),N=h.n(O),I=h(41699),R=h(80846),A=h(35724),P=h(97033),T=h(16815),o=h(96773),B=function(e){var r=e.width,n=e.height,i=e.left,l=e.top,a=e.curve,u=e.zIndex,t=u===void 0?1:u,d=e.strokeWidth,f=e.strokeColor,m=e.fill,g=m===void 0?"transparent":m,k=a.mx,p=a.my,c=a.cx1,x=a.cy1,s=a.cx2,v=a.cy2,b=a.cx,y=a.cy;return(0,o.jsxs)("svg",{width:r+2*d,height:n+2*d,xmlns:"http://www.w3.org/2000/svg",pointerEvents:"none",style:{position:"fixed",transform:"translate(".concat(i-d,"px,").concat(l-d,"px)"),zIndex:t},children:[(0,o.jsx)("path",{id:"".concat(c).concat(x),d:"M ".concat(k+d," ").concat(p+d," C ").concat(c," ").concat(x,", ").concat(s," ").concat(v,", ").concat(b+d," ").concat(y+d),strokeWidth:d,stroke:f,fill:g,pointerEvents:"visibleStroke"}),(0,o.jsx)("circle",{r:"3",fill:"black",children:(0,o.jsx)("animateMotion",{repeatCount:"indefinite",dur:"3s",children:(0,o.jsx)("mpath",{href:"#".concat(c).concat(x)})})})]})},G=B,U=function(e){var r=e.r,n=e.strokeWidth,i=e.zIndex,l=i===void 0?999:i,a=e.left,u=e.top,t=e.strokeColor,d=t===void 0?"black":t,f=e.fill,m=f===void 0?"rgb(140,140,140)":f,g=r+n,k=g*2;return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:k,height:k,style:{position:"fixed",zIndex:l,transform:"translate(".concat(a-g,"px,").concat(u-g,"px)")},children:(0,o.jsx)("circle",{r,fill:m,stroke:d,strokeWidth:n,cx:g,cy:g})})},W=U,J=function(e,r){var n=Math.abs(e.x-r.x),i=Math.abs(e.y-r.y),l=e.x<r.x?0:n,a=e.y<r.y?0:i,u=e.x<r.x?n:0,t=e.y<r.y?i:0,d=e.direction=="horizontal"?n/2:l,f=e.direction=="horizontal"?a:i/2,m=r.direction=="horizontal"?n/2:u,g=r.direction=="horizontal"?t:i/2;return{mx:l,my:a,cx1:d,cy1:f,cx2:m,cy2:g,cx:u,cy:t}},K=function(e){var r=e.startConnector,n=e.endConnector,i=e.edgeStroke,l=i===void 0?2:i,a=e.edgeColor,u=a===void 0?"black":a,t=e.connectorR,d=t===void 0?3:t,f=e.connectorStroke,m=f===void 0?1:f,g=e.connectorStrokeColor,k=g===void 0?"black":g,p=e.connectorFill,c=p===void 0?"rgb(140,140,140)":p,x=r.node.connector(r.position,r.fraction),s=n.node.connector(n.position,n.fraction),v=Math.max(r.node.zIndex,n.node.zIndex)+1,b=v+1,y=b+1,F=Math.abs(x.x-s.x),te=Math.abs(x.y-s.y),ne=Math.min(x.x,s.x),re=Math.min(x.y,s.y),ie=J(x,s);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G,{width:F,height:te,left:ne,top:re,curve:ie,strokeWidth:l,strokeColor:u,zIndex:v}),(0,o.jsx)(W,{r:d,left:x.x,top:x.y,zIndex:b,strokeWidth:m,strokeColor:k,fill:c}),(0,o.jsx)(W,{r:d,left:s.x,top:s.y,zIndex:y,strokeWidth:m,strokeColor:k,fill:c})]})},j=K,X=h(25298),Y=h.n(X),H=h(17069),L=h.n(H),Q=h(82092),C=h.n(Q),M=function(){function S(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Y()(this,S),C()(this,"key",void 0),C()(this,"left",void 0),C()(this,"top",void 0),C()(this,"right",void 0),C()(this,"bottom",void 0),C()(this,"dom",void 0),C()(this,"zIndex",void 0),C()(this,"init",void 0),this.key=e,this.left=r,this.top=n,this.zIndex=i,this.init=!1}return L()(S,[{key:"move",value:function(r,n){this.left+=r,this.top+=n,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"isBound",value:function(){return this.bottom!=null&&this.right!=null}},{key:"bind",value:function(r){this.init=!0,this.dom=r,this.right=this.left+parseFloat(window.getComputedStyle(this.dom).width),this.bottom=this.top+parseFloat(window.getComputedStyle(this.dom).height)}},{key:"connector",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=["left","right"].includes(r)?"horizontal":"vertical";switch(r){case"left":return{direction:i,x:this.left,y:this.top+(this.bottom-this.top)*n};case"right":return{direction:i,x:this.right,y:this.top+(this.bottom-this.top)*n};case"top":return{direction:i,x:this.left+(this.right-this.left)*n,y:this.top};case"bottom":return{direction:i,x:this.left+(this.right-this.left)*n,y:this.bottom}}}}]),S}(),V=function(e){var r=e.children,n=e.node,i=e.onNodeSelected,l=e.ref,a=e.moving,u=a===void 0?!1:a;return(0,o.jsx)("div",{id:n.key,ref:function(d){d&&(n.bind(d),l.current[n.key]=d)},style:{zIndex:n.zIndex,position:"fixed",transform:"translate(".concat(n.left,"px,").concat(n.top,"px)"),cursor:u?"grabbing":"grab"},onMouseDown:function(){return i==null?void 0:i(n.key)},onTouchStart:function(){return i==null?void 0:i(n.key)},children:r},n.key)},w=V,q=h(15558),z=h.n(q),_=function(e){var r=e.nodes,n=r===void 0?[]:r,i=e.onNodeSelected,l=e.title,a=l===void 0?"":l,u=n.filter(function(c){return!Array.isArray(c)}),t=n.filter(function(c){return Array.isArray(c)}),d=function c(x){var s=[];return x.forEach(function(v){Array.isArray(v)?s=[].concat(z()(s),z()(c(v))):s.push(v.key)}),s},f={top:60,left:20,right:20,bottom:20},m=Math.min.apply(Math,z()(u.map(function(c){return c.top})))-f.top,g=Math.max.apply(Math,z()(u.map(function(c){return c.bottom})))+f.bottom,k=Math.min.apply(Math,z()(u.map(function(c){return c.left})))-f.left,p=Math.max.apply(Math,z()(u.map(function(c){return c.right})))+f.right;return(0,o.jsx)("div",{style:{zIndex:-1,background:"rgba(255,176,124, 0.5)",border:"solid 1px rgb(0,0,0)",width:"".concat(p-k,"px"),height:"".concat(g-m,"px"),position:"fixed",transform:"translate(".concat(k,"px, ").concat(m,"px)"),cursor:"move",padding:"8px",margin:"8px"},onMouseDown:function(){return i==null?void 0:i(d(n))},children:a})},E=_,ee=function(){var e=(0,I.useState)([]),r=N()(e,2),n=r[0],i=r[1],l=(0,I.useRef)({}),a=(0,I.useState)({node0:new M("node0",40,40,20),node1:new M("node1",420,300,30),node2:new M("node2",690,220,40),node3:new M("node3",880,280,40),node4:new M("node4",1180,150,40),node5:new M("node5",1590,230,40)}),u=N()(a,2),t=u[0],d=u[1],f=(0,I.useState)(0),m=N()(f,2),g=m[0],k=m[1];(0,I.useEffect)(function(){var s=0;return Object.entries(l.current).forEach(function(v){var b=N()(v,2),y=b[0],F=b[1];t[y].isBound()?s=1:s=0}),k(s),function(){k(0)}},[]);var p=function(v){Array.isArray(v)?i(v):i([v])},c=function(){n.length>0&&i([])},x=function(v){if(n.length>0){var b=Object.fromEntries(n.map(function(y){var F=t[y];return F.move(v.movementX,v.movementY),[y,F]}));d($()($()({},t),b))}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{margin:"8px"},children:"Drag component to move."}),(0,o.jsxs)("div",{style:{background:"rgb(240,240,240)",height:"600px",width:"100%",overflow:"auto",contain:"paint"},onMouseMove:x,onTouchMove:x,onMouseUp:c,onTouchEnd:c,children:[(0,o.jsx)(w,{node:t.node0,onNodeSelected:p,ref:l,moving:n.includes(t.node0.key),children:(0,o.jsx)("div",{style:{background:"rgba(149,191,255,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Input"})}),(0,o.jsx)(w,{node:t.node1,onNodeSelected:p,ref:l,moving:n.includes(t.node1.key),children:(0,o.jsxs)(R.Z,{direction:"vertical",style:{background:"rgba(240,149,255,0.9)",border:"solid 1px rgb(0,0,0)",width:"100%",height:"100%",padding:"12px"},children:["Step 1",(0,o.jsx)(A.Z,{placeholder:"Data"}),(0,o.jsx)(P.Z,{})]})}),(0,o.jsx)(w,{node:t.node2,onNodeSelected:p,ref:l,moving:n.includes(t.node2.key),children:(0,o.jsx)("div",{style:{background:"rgba(240,149,255,0.9)",border:"solid 1px rgb(0,0,0)",padding:"8px"},children:"step 2"})}),(0,o.jsx)(w,{node:t.node3,onNodeSelected:p,ref:l,moving:n.includes(t.node3.key),children:(0,o.jsx)("div",{style:{background:"rgba(240,149,255,0.9)",border:"solid 1px rgb(0,0,0)",padding:"8px",maxWidth:"200px"},children:(0,o.jsxs)(R.Z,{direction:"vertical",children:["step 3",(0,o.jsx)(A.Z,{placeholder:"Data"}),(0,o.jsx)(T.Z,{})]})})}),(0,o.jsx)(w,{node:t.node4,onNodeSelected:p,ref:l,moving:n.includes(t.node4.key),children:(0,o.jsxs)("div",{style:{background:"rgba(240,149,255,0.9)",border:"solid 1px rgb(0,0,0)",padding:"8px"},children:["step 4",(0,o.jsx)(A.Z,{placeholder:"Data"})]})}),(0,o.jsx)(w,{node:t.node5,onNodeSelected:p,ref:l,moving:n.includes(t.node5.key),children:(0,o.jsx)("div",{style:{background:"rgba(204,255,149,0.5)",border:"solid 1px rgb(0,0,0)",padding:"24px"},children:"Output"})}),g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j,{startConnector:{node:t.node0,position:"right"},endConnector:{node:t.node1,position:"left"},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"}),(0,o.jsx)(j,{startConnector:{node:t.node0,position:"right"},endConnector:{node:t.node2,position:"left"},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"}),(0,o.jsx)(j,{startConnector:{node:t.node2,position:"right"},endConnector:{node:t.node3,position:"left"},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"}),(0,o.jsx)(j,{startConnector:{node:t.node2,position:"right"},endConnector:{node:t.node4,position:"left"},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"}),(0,o.jsx)(j,{startConnector:{node:t.node3,position:"right",fraction:.6},endConnector:{node:t.node5,position:"left",fraction:.6},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"}),(0,o.jsx)(j,{startConnector:{node:t.node3,position:"right",fraction:.4},endConnector:{node:t.node5,position:"left",fraction:.4},connectorR:4,connectorStroke:1,edgeStroke:2,connectorFill:"rgb(176,43, 201)"})]}),(0,o.jsx)(E,{title:"Big Process",nodes:[t.node1,t.node2,t.node3,t.node4],onNodeSelected:p}),(0,o.jsx)(E,{title:"Sub Process",nodes:[t.node2,t.node3],onNodeSelected:p})]}),(0,o.jsxs)("div",{children:["Moving: ",JSON.stringify(n)]}),(0,o.jsxs)("div",{children:[Object.entries(t).map(function(s){var v=N()(s,2),b=v[0],y=v[1];return(0,o.jsxs)("div",{children:[b,": ",JSON.stringify({key:y.key,left:y.left,top:y.top,right:y.right,bottom:y.bottom})]},b)}),(0,o.jsx)("hr",{})]})]})},oe=ee}}]);
